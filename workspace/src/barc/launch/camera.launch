<launch>
  <node pkg="usb_cam" type="usb_cam_node" name="barc_cam" output="screen">
    <param name="pixel_format" value="yuyv"/>
    <param name="sharpness" value="255"/>
    <param name="saturation" value="255"/>
    <param name="framerate" value="5"/>
    <param name="contrast" value="1"/>
    <param name="image_width" value="320"/>
    <param name="image_height" value="240"/>
  </node>

  <node pkg="barc" type="camera_processing.py" name="barc_cam_undist" output="screen">
  </node>

  <!-- todo after calibration successful -->
  <!-- <node pkg="image_proc" type="image_proc" name="barc_cam_proc" ns="barc_cam" output="screen"> -->
  <!-- </node> -->

  <!-- Display raw camera stream with compression -->
  <!-- <node name="view" pkg="image_view" type="image_view" output="screen"> -->
  <!--   <remap from="image" to="/barc_cam/image_raw"/> -->
  <!--   <remap from="image_transport" to="compressed"/> -->
  <!-- </node> -->

  <!-- Display opencv undistorted camera stream -->
  <node name="viewundist" pkg="image_view" type="image_view" output="screen">
    <!-- <remap from="image" to="barc_cam/image_rect_color"/> -->
    <remap from="image" to="img_corrected"/>
  </node>

  <node name="image_saver" pkg="image_view" type="image_saver" output="screen">
    <remap from="image" to="img_corrected"/>
    <param name="filename_format" value="/home/odroid/bag/camera/barc%04i.%s"/>
    <param name="save_all_image" value="false"/> <!-- toggle to true to autosave, when false save on command with `rosservice call /image_saver/save` -->
  </node>

</launch>
